# 装备库浏览器功能测试指南

## 测试前准备

### 1. 数据库设置
1. 在 Supabase Dashboard 中运行 `database-migration.sql` 脚本
2. 确保 `skus`、`brands`、`categories` 表中有一些测试数据
3. 确保 `users_profiles` 表存在（用于显示评价者姓名）

### 2. 环境配置
确保 `.env.local` 文件中包含正确的 Supabase 配置：
```env
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
```

## 功能测试步骤

### 1. 装备浏览器页面测试 (`/equipment-browser`)

#### 基础功能测试
- [ ] 页面正常加载，显示装备列表
- [ ] 搜索框输入装备名称，结果实时更新
- [ ] 品牌筛选器正常工作
- [ ] 分类筛选器正常工作
- [ ] 排序功能（按评分、价格、名称等）正常工作
- [ ] 网格/列表视图切换正常

#### 交互测试
- [ ] 点击"添加到我的装备"按钮（需登录）
- [ ] 点击"查看详情"跳转到装备详情页
- [ ] 评分和评论数正确显示

### 2. 装备详情页测试 (`/equipment/[id]`)

#### 页面显示测试
- [ ] 装备基本信息正确显示（名称、品牌、价格等）
- [ ] 评分统计正确显示（平均评分、评论数、评分分布）
- [ ] 用户评价列表正确显示
- [ ] 评价排序功能正常

#### 登录用户功能测试
- [ ] "添加到我的装备"功能正常
- [ ] "写评价"按钮正常显示和点击
- [ ] 如果用户已评价，显示"编辑我的评价"
- [ ] 用户自己的评价在顶部单独显示
- [ ] 编辑和删除自己评价的功能正常

### 3. 评价模态框测试

#### 评价创建测试
- [ ] 模态框正常打开和关闭
- [ ] 星级评分交互正常（点击和悬停效果）
- [ ] 所有表单字段正常输入
- [ ] 表单验证正常工作（评分必需）
- [ ] 提交评价成功，页面数据更新

#### 评价编辑测试
- [ ] 编辑现有评价时，表单预填充正确
- [ ] 修改评价内容并保存成功
- [ ] 删除评价功能正常

### 4. 数据一致性测试

#### 评分统计测试
- [ ] 添加评价后，平均评分正确更新
- [ ] 评论数量正确更新
- [ ] 评分分布图表正确更新
- [ ] 删除评价后，统计数据正确回滚

#### 权限测试
- [ ] 未登录用户无法写评价
- [ ] 用户只能编辑/删除自己的评价
- [ ] 用户不能对同一装备重复评价

## 性能测试

### 1. 加载性能
- [ ] 装备列表加载速度合理
- [ ] 搜索响应速度快
- [ ] 装备详情页加载速度合理

### 2. 数据库性能
- [ ] 大量装备时筛选性能良好
- [ ] 评分统计计算性能良好
- [ ] 并发评价时数据一致性保持

## 边界情况测试

### 1. 数据边界
- [ ] 空装备列表显示正确
- [ ] 无评价的装备显示正确
- [ ] 极长的评价内容正确显示
- [ ] 特殊字符在评价中正确处理

### 2. 错误处理
- [ ] 网络错误时显示合适提示
- [ ] 装备不存在时显示404页面
- [ ] 数据库错误时优雅处理

## 移动端测试

### 响应式设计
- [ ] 装备浏览器在移动端正常显示
- [ ] 筛选器在移动端可用
- [ ] 装备详情页在移动端布局正确
- [ ] 评价模态框在移动端可用

### 触摸交互
- [ ] 星级评分在移动端触摸正常
- [ ] 滚动和导航在移动端流畅

## 测试数据建议

### 创建测试数据
1. **品牌数据**：Nike、Adidas、Garmin、Polar等
2. **分类数据**：跑鞋、手表、自行车、服装等
3. **装备数据**：不同品牌和分类的装备，包含价格和描述
4. **用户数据**：几个测试用户账号
5. **评价数据**：不同评分的测试评价

### 测试场景
1. **新用户**：第一次访问，浏览和搜索装备
2. **活跃用户**：已有装备库，添加新装备和评价
3. **评价用户**：查看和管理自己的评价
4. **浏览用户**：主要查看他人评价，偶尔评价

## 预期结果

所有测试项目都应该通过，系统应该：
1. 响应迅速，用户体验流畅
2. 数据准确，统计信息正确
3. 安全可靠，权限控制严格
4. 界面友好，移动端兼容良好

如果发现任何问题，请记录详细的错误信息和复现步骤。